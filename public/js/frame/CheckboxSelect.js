/**
 * Edition：v2.8.6
 * Author:洺洛
 * QQ group:376687100 
 * Create Date:2016-01-02
 * Version Date:2016-12-28
 * 
1、实例的方式调用
	var box = new CheckboxSelect("seleid");
	box.onChange(function(newV,oldV){//值改变事件
		alert("内容改变！\n\t新值："+newV+"\n\t旧值："+oldV);
	});
	box.disabledTrue();//禁用多选框
	box.disabledFalse();//启用多选框
	box.resetSelecteds();//清空选项值
	box.setValues("000001,000002,000005",",");//赋值
	box.setDefaultWord("请选择");//设置未选择值时的缺省字体
	
2、脱离实例的调用
	CheckboxSelect("seleid");//创建控件
	CheckboxSelectOnChange("seleid",function(newV,oldV){//值改变事件
		alert("内容改变！\n\t新值："+newV+"\n\t旧值："+oldV);
	});
	CheckboxSelectDisabledTrue("seleid");//禁用多选框
	CheckboxDisabledFalse("seleid");//启用多选框
	resetCheckboxOptionSelecteds("seleid");//清空选项值
	setCheckboxOptionSelecteds("seleid","000001,000002,000005",",");//赋值
	setCheckboxOptionDefaultWord("seleid","请选择");//设置未选择值时的缺省字体
	getCheckboxOptionValues("seleid");//获取value值
	getCheckboxOptionTexts("seleid");//获取text值
 */
var CheckboxSelect_SettingParameters={
		getValueSplitChar: ",",//多选框选择的value值（保存到后台的值）用什么符号隔开，这里默认为英文分号隔开
		getTextSplitChar: " | ",//多选框选择的text值（页面展现的值）用什么符号隔开，这里默认为英文分号加一个空格隔开
		buttonBorderColor_over: "#26A0DA",//鼠标经过或获取焦点时的边框颜色
		buttonIcoBackgroundColor_over: "#EAF6FD",//鼠标经过或获取焦点时的图标背景颜色
		buttonBorderColor_out: "#cccccc",//鼠标离开或没获取焦点时的边框颜色
		buttonIcoBackgroundColor_out: "#FFFFFF",//鼠标离开或没获取焦点时的图标背景颜色
		buttonBackgroundIcoOrTextSwitch: false, //设置下拉图标为字符还是为图片(true-用字符的下拉图标，false-用图片的下拉图标)
		buttonBackgroundIco_url: "../addons/yc_youliao/public/images/combo_arrow.png",//设置下拉图标为图片时的图片路径
		optionBoardBorderColor: "#cccccc", //选项板边框颜色
		CheckboxSelectCheckedAllSwitch: true //设置是否有全选按钮(true-有，false-没有)
},CheckboxSelectParameterArr_=[[],0,"","",0,[],{}];Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});var CheckboxSelect_MemberJson={createCheckboxSelectHtml:function(a,b,c,d,e,f,g){-1==CheckboxSelectParameterArr_[0].indexOf(a)&&(CheckboxSelectParameterArr_[0][CheckboxSelectParameterArr_[0].length]=a);var h=document.createElement("div");h.style.width=d;h.style.height=e;h.style.position="relative";h.innerHTML="<input type='hidden' id='value_"+a+"' name='"+c+"'/><table id='buttonidstable_"+a+"' align='center' style='border: 1px "+CheckboxSelect_SettingParameters.buttonBorderColor_out+" solid; width:"+d+"; height:"+e+"; border-collapse:collapse; table-layout:fixed;'><tr><td><input id='textids_"+a+"' readonly='readonly' type='button' style='float:left; border: 1px solid #FFFFFF; background-color:#FFFFFF; overflow: hidden; width: 100%; height: 100%; white-space: nowrap'></td><td width='15px' id='buttonidstabletd_"+a+"' align='center' style='border-left: 1px "+CheckboxSelect_SettingParameters.buttonBorderColor_out+" solid; cursor:default;"+(1==CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch?"font-size: 10px;":"")+"'>"+(1==CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch?"\u25bc":"<div style='width:100%;height:100%;background:#FFFFFF url("+CheckboxSelect_SettingParameters.buttonBackgroundIco_url+") no-repeat scroll center center;'></div>")+"</td></tr></table>";b?(b=document.getElementById(a),b.parentNode.insertBefore(h,b.nextSibling)):document.getElementById(a).appendChild(h);b=document.createElement("div");b.id="divids_"+a;b.style.position="absolute";b.style.border="1px solid "+CheckboxSelect_SettingParameters.optionBoardBorderColor;b.style.backgroundColor="#FFFFFF";b.style.overflow="auto";b.style.zIndex="99999";b.style.display="block";b.onmouseover=function(){CheckboxSelectParameterArr_[1]=1};b.onmouseout=function(){CheckboxSelectParameterArr_[1]=0};b.innerHTML=f;b.style.height=8>g?29*g+"px":"200px";h.appendChild(b);f=document.getElementsByName("cbox_"+a);for(g=0;g<f.length;g++)f[g].onclick=function(){CheckboxSelect_MemberJson.setChecked(a)};CheckboxSelect_SettingParameters.CheckboxSelectCheckedAllSwitch&&(document.getElementsByName("cboxCheckedAll_"+a)[0].onclick=function(){CheckboxSelect_MemberJson.isCheckedAll(a)});f=document.getElementById("buttonidstable_"+a);f.onmouseover=function(){CheckboxSelect_MemberJson.setTextDivStyle(a,!0)};f.onmouseout=function(){"none"==document.getElementById("divids_"+a).style.display&&CheckboxSelect_MemberJson.setTextDivStyle(a,!1)};f.onclick=function(){if(-1==CheckboxSelectParameterArr_[5].indexOf(a)){var b=document.getElementById("divids_"+a);"none"==b.style.display&&(CheckboxSelectParameterArr_[2]=a,b.style.display="block",CheckboxSelect_MemberJson.setOptionDivTopAndLeft(a))}};b.style.display="none";CheckboxSelectParameterArr_[6]=eval("("+CheckboxSelect_MemberJson.jsonFunctionOnChanges()+")")},jsonFunctionOnChanges:function(){for(var a="{",b=0;b<CheckboxSelectParameterArr_[0].length;b++)a=b==CheckboxSelectParameterArr_[0].length-1?a+(CheckboxSelectParameterArr_[0][b]+"OnChange:function(a,b){}"):a+(CheckboxSelectParameterArr_[0][b]+"OnChange:function(a,b){},");return a+"}"},documentOnclick:function(){for(var a=0;a<CheckboxSelectParameterArr_[0].length;a++){var b=document.getElementById("divids_"+CheckboxSelectParameterArr_[0][a]);void 0!=b&&null!=b&&"block"==b.style.display&&(CheckboxSelectParameterArr_[2]!=CheckboxSelectParameterArr_[0][a]?0==CheckboxSelectParameterArr_[1]&&(b.style.display="none",CheckboxSelect_MemberJson.setTextDivStyle(CheckboxSelectParameterArr_[0][a],!1)):(CheckboxSelectParameterArr_[2]="",CheckboxSelect_MemberJson.setTextDivStyle(CheckboxSelectParameterArr_[0][a],!0)))}},setOnChanges:function(a,b){"function"==typeof b&&setTimeout(function(){eval("CheckboxSelectParameterArr_[6]."+a+"OnChange="+b)},1)},isCheckedAll:function(a){var b=getCheckboxOptionValues(a),c="",d="",e=document.getElementsByName("cbox_"+a);if(1==document.getElementsByName("cboxCheckedAll_"+a)[0].checked)for(i=0;i<e.length;i++)e[i].checked=!0,c+=""==c?e[i].value:CheckboxSelect_SettingParameters.getValueSplitChar+e[i].value,d+=""==d?e[i].nextSibling.nodeValue:CheckboxSelect_SettingParameters.getTextSplitChar+e[i].nextSibling.nodeValue;else for(i=0;i<e.length;i++)e[i].checked=!1;document.getElementById("value_"+a).value=c;document.getElementById("textids_"+a).value=d;document.getElementById("buttonidstable_"+a).title=d;b!=c&&eval("CheckboxSelectParameterArr_[6]."+a+"OnChange.call(this,'"+c+"','"+b+"')")},setTextDivStyle:function(a,b){if(-1==CheckboxSelectParameterArr_[5].indexOf(a)){var c=document.getElementById("buttonidstabletd_"+a),d=document.getElementById("buttonidstable_"+a);b?(CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch||(c.getElementsByTagName("div")[0].style.backgroundColor=CheckboxSelect_SettingParameters.buttonIcoBackgroundColor_over),c.style.backgroundColor=CheckboxSelect_SettingParameters.buttonIcoBackgroundColor_over,c.style.borderLeftColor=CheckboxSelect_SettingParameters.buttonBorderColor_over,d.style.borderColor=CheckboxSelect_SettingParameters.buttonBorderColor_over):(CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch||(c.getElementsByTagName("div")[0].style.backgroundColor=CheckboxSelect_SettingParameters.buttonIcoBackgroundColor_out),c.style.backgroundColor=CheckboxSelect_SettingParameters.buttonIcoBackgroundColor_out,c.style.borderLeftColor=CheckboxSelect_SettingParameters.buttonBorderColor_out,d.style.borderColor=CheckboxSelect_SettingParameters.buttonBorderColor_out)}},getOptionSelecteHtml:function(a){var b=document.getElementById(a),c="<table id='rowtableid_"+a+"' align='left' >";CheckboxSelect_SettingParameters.CheckboxSelectCheckedAllSwitch&&(c+=CheckboxSelect_MemberJson.getOptionsHtml(a,"1","\u5168\u9009",2));for(var d=0;d<b.options.length;d++){var e=b.options[d].text,f=b.options[d].value;""!=f&&(1==b.options[d].selected&&(CheckboxSelectParameterArr_[3]+=""==CheckboxSelectParameterArr_[3]?f:"_$o$_"+f),c+=CheckboxSelect_MemberJson.getOptionsHtml(a,f,e,1))}return c+"</table>"},getOptionJsonHtml:function(a,b){var c="<table id='rowtableid_"+b+"' align='left' >";CheckboxSelect_SettingParameters.CheckboxSelectCheckedAllSwitch&&(CheckboxSelectParameterArr_[4]=1,c+=CheckboxSelect_MemberJson.getOptionsHtml(b,"1","\u5168\u9009",2));for(var d in a)CheckboxSelectParameterArr_[4]+=1,c+=CheckboxSelect_MemberJson.getOptionsHtml(b,d,a[d],1);return c+"</table>"},getOptionsHtml:function(a,b,c,d){var e="";1==d?e="<tr><td align='left' nowrap='nowrap' style='cursor:default;'><label><input type='checkbox' name='cbox_"+a+"' value='"+b+"' />"+c+"</label></td></tr>":2==d&&(e="<tr><td align='left' nowrap='nowrap' style='cursor:default;'><label><input type='checkbox' name='cboxCheckedAll_"+a+"' value='"+b+"' /><font color='#6D6D6D'><b>"+c+"</b></font></label></td></tr>");return e},setOptionDivTopAndLeft:function(a){var b=document.getElementById("divids_"+a),c=document.getElementById("buttonidstable_"+a),d=0,e=b.style.width,d=void 0!=e&&null!=e&&""!=e?e.replace("px",""):b.scrollWidth+22;d>CheckboxSelect_MemberJson.getInnerWidth()?b.style.width=CheckboxSelect_MemberJson.getInnerWidth()-22+"px":(a=document.getElementById("textids_"+a).offsetWidth,b.style.width=a>d?a+"px":d+"px");a=c.getBoundingClientRect().left;d=b.getBoundingClientRect().left;a!=d&&(b.style.left=a+"px");a=c.getBoundingClientRect().top;c=c.offsetHeight;d=b.getBoundingClientRect().top;a+c!=d&&(b.style.top=a+c+"px");d=b.getBoundingClientRect().left;c=b.offsetWidth;e=CheckboxSelect_MemberJson.getInnerWidth();d+c>e&&(c=e-c,0<=c&&(b.style.left=c+"px"));d=b.getBoundingClientRect().top;c=b.offsetHeight;e=CheckboxSelect_MemberJson.getInnerHeight();d+c>e&&(a-=c,0<=a&&(b.style.top=a+"px"))},getInnerWidth:function(){var a=0;window.innerWidth?a=window.innerWidth:document.body&&document.body.clientWidth&&(a=document.body.clientWidth);if(document.documentElement&&document.documentElement.clientWidth){var b=document.documentElement.clientWidth;a<b&&(a=b)}return a},getInnerHeight:function(){var a=0;window.innerHeight?a=window.innerHeight:document.body&&document.body.clientHeight&&(a=document.body.clientHeight);if(document.documentElement&&document.documentElement.clientHeight){var b=document.documentElement.clientHeight;a<b&&(a=b)}return a},setChecked:function(a){var b=getCheckboxOptionValues(a),c=document.getElementsByName("cbox_"+a),d="",e="";for(i=0;i<c.length;i++)1==c[i].checked&&(d+=""==d?c[i].value:CheckboxSelect_SettingParameters.getValueSplitChar+c[i].value,e+=""==e?c[i].nextSibling.nodeValue:CheckboxSelect_SettingParameters.getTextSplitChar+c[i].nextSibling.nodeValue);document.getElementById("value_"+a).value=d;document.getElementById("textids_"+a).value=e;document.getElementById("buttonidstable_"+a).title=e;eval("CheckboxSelectParameterArr_[6]."+a+"OnChange.call(this,'"+d+"','"+b+"')")}};function CheckboxSelect(a){if(-1==CheckboxSelectParameterArr_[0].indexOf(a)){var b=document.getElementById(a);if(void 0!=b&&null!=b){var c=b.name||"",d="",d=void 0!=b.style.width&&null!=b.style.width&&""!=b.style.width?b.style.width:"100%",e="",e=void 0!=b.style.height&&null!=b.style.height&&""!=b.style.height?b.style.height:"32px",f=CheckboxSelect_MemberJson.getOptionSelecteHtml(a),g=b.options.length;CheckboxSelect_SettingParameters.CheckboxSelectCheckedAllSwitch&&(g+=1);CheckboxSelect_MemberJson.createCheckboxSelectHtml(a,!0,c,d,e,f,g);""!=CheckboxSelectParameterArr_[3]&&b.multiple&&setCheckboxOptionSelecteds(a,CheckboxSelectParameterArr_[3],"_$o$_");CheckboxSelectParameterArr_[3]="";b.parentNode.removeChild(b)}}this.onChange=function(b){CheckboxSelect_MemberJson.setOnChanges(a,b)};this.disabledTrue=function(){CheckboxSelectDisabledTrue(a)};this.disabledFalse=function(){CheckboxDisabledFalse(a)};this.resetSelecteds=function(){resetCheckboxOptionSelecteds(a)};this.setValues=function(b,c){setCheckboxOptionSelecteds(a,b,c)};this.setDefaultWord=function(b){setCheckboxOptionDefaultWord(a,b)}}function CheckboxSelectJson(a,b,c,d,e){-1==CheckboxSelectParameterArr_[0].indexOf(a)&&(c=CheckboxSelect_MemberJson.getOptionJsonHtml(c,a),CheckboxSelect_MemberJson.createCheckboxSelectHtml(a,!1,b,d||"152px",e||"22px",c,CheckboxSelectParameterArr_[4]),CheckboxSelectParameterArr_[4]=0);this.onChange=function(b){CheckboxSelect_MemberJson.setOnChanges(a,b)};this.disabledTrue=function(){CheckboxSelectDisabledTrue(a)};this.disabledFalse=function(){CheckboxDisabledFalse(a)};this.resetSelecteds=function(){resetCheckboxOptionSelecteds(a)};this.setValues=function(b,c){setCheckboxOptionSelecteds(a,b,c)};this.setDefaultWord=function(b){setCheckboxOptionDefaultWord(a,b)}}window.jQuery&&window.$?$(document).click(function(){CheckboxSelect_MemberJson.documentOnclick()}):document.onclick=function(){CheckboxSelect_MemberJson.documentOnclick()};function setCheckboxOptionSelecteds(a,b,c){setTimeout(function(){var d=getCheckboxOptionValues(a),e=document.getElementsByName("cbox_"+a),f="",g="",h=[],h=b.split(c||CheckboxSelect_SettingParameters.getValueSplitChar);for(b=0;b<h.length;b++)for(c=0;c<e.length;c++)0==b&&1==e[c].checked&&(e[c].checked=!1),h[b]==e[c].value&&(e[c].checked=!0,f+=""==f?e[c].value:CheckboxSelect_SettingParameters.getValueSplitChar+e[c].value,g+=""==g?e[c].nextSibling.nodeValue:CheckboxSelect_SettingParameters.getTextSplitChar+e[c].nextSibling.nodeValue);document.getElementById("value_"+a).value=f;document.getElementById("textids_"+a).value=g;document.getElementById("buttonidstable_"+a).title=g;document.getElementsByName("cboxCheckedAll_"+a)[0].checked=!1;f!=d&&eval("CheckboxSelectParameterArr_[6]."+a+"OnChange.call(this,'"+f+"','"+d+"')")},1)}function CheckboxSelectOnChange(a,b){CheckboxSelect_MemberJson.setOnChanges(a,b)}function resetCheckboxOptionSelecteds(a){setTimeout(function(){var b=getCheckboxOptionValues(a),c=document.getElementsByName("cbox_"+a);for(i=0;i<c.length;i++)1==c[i].checked&&(c[i].checked=!1);document.getElementById("buttonidstable_"+a).title="";document.getElementById("value_"+a).value="";document.getElementById("textids_"+a).value="";document.getElementsByName("cboxCheckedAll_"+a)[0].checked=!1;""!=b&&eval("CheckboxSelectParameterArr_[6]."+a+"OnChange.call(this,'','"+b+"')")},1)}function CheckboxSelectDisabledFalse(a){for(var b=0;b<CheckboxSelectParameterArr_[5].length;b++)if(CheckboxSelectParameterArr_[5][b]==a){CheckboxSelectParameterArr_[5].splice(b,1);document.getElementById("textids_"+a).disabled="";var c=document.getElementById("buttonidstabletd_"+a);CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch?c.style.color="#000000":c.getElementsByTagName("div")[0].style.opacity="1";CheckboxSelect_MemberJson.setTextDivStyle(a,!1)}}function CheckboxSelectDisabledTrue(a){if(-1==CheckboxSelectParameterArr_[5].indexOf(a)){CheckboxSelectParameterArr_[5][CheckboxSelectParameterArr_[5].length]=a;document.getElementById("textids_"+a).disabled="disabled";var b=document.getElementById("buttonidstabletd_"+a);CheckboxSelect_SettingParameters.buttonBackgroundIcoOrTextSwitch?b.style.color="#C2C0C5":(b.getElementsByTagName("div")[0].style.opacity="0.5",b.getElementsByTagName("div")[0].style.backgroundColor="#FFFFFF");b.style.backgroundColor="#FFFFFF";b.style.borderLeftColor="#C2C0C5";document.getElementById("buttonidstable_"+a).style.borderColor="#C2C0C5"}}function setCheckboxOptionDefaultWord(a,b){var c=setInterval(function(){var d=document.getElementById("textids_"+a);d?0==getCheckboxOptionValues(a).length&&(d.value=b):window.clearInterval(c)},500)}function getCheckboxOptionValues(a){return document.getElementById("value_"+a).value||""}function getCheckboxOptionTexts(a){return document.getElementById("textids_"+a).value||""};